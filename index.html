<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Airview UI Preview</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

  </head>
  <body>

    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
				</div>
			</div>
			<br>
			<div class="alert alert-dismissable alert-info">
				<strong>Heads up!</strong> It could take up to 5 minutes for main branch changes to reflect here. 
			</div>
			<h3>
				Airview Storybook Preview
			</h3>
		</div>
	</div>
	<br><hr><br>
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<h3 class="text-center text-primary">
								Airview UI
							</h3>
						</div>
						<div class="col-md-6">
							 
							<a type="button" class="btn btn-success" href="https://airwalk-digital.github.io/airview/airview-ui/">
								Preview
							</a>
						</div>
					</div>
				</div>
			</div>
			<br><hr><br>
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<h3 class="text-center text-primary">
								Airview Compliance UI
							</h3>
						</div>
						<div class="col-md-6">
							 
							<a type="button" class="btn btn-success" href="https://airwalk-digital.github.io/airview/airview-compliance-ui/">
								Preview
							</a>
						</div>
					</div>
				</div>
			</div>
			<br><hr>
		</div>
	</div>
	<br><br>
	<h3>
		Airview Pull Request Previews
	</h3>
	<br>
	<div class="row">
		<div class="col-md-12">
			<table id="pr-table" class="table table-bordered table-hover">
				<thead>
					<tr>
						<th>
							#
						</th>
						<th>
							Request Title
						</th>
						<th>
							Creation Date
						</th>
						<th>
							Status
						</th>
						<th>
							Perma-links
						</th>
					</tr>
				</thead>
				<tbody>
					
				</tbody>
			</table>
		</div>
	</div>
</div>
	/* <script>
		const Http = new XMLHttpRequest();
		const url = "https://api.github.com/repos/AirWalk-Digital/airview/pulls?state=open";
		Http.open("GET", url);
		Http.send();

		const Table = document.getElementById('pr-table');
		Http.onreadystatechange=(e)=>{
			if (true == true){
				console.log(Http.responseText);
				const resp = JSON.parse(Http.responseText);

				for (var i=0; i<resp; i++){
					const prid = resp['number'];
					const prtitle = resp['title'];
					const prdate = resp['created_at'];

					const PRUIURL = "https://airwalk-digital.github.io/airview/pr-preview-ui/pr-" + prid;

					Table.find('tbody').append("<tr><td>" + prid + "</td>" + "<td>" + prtitle + "</td>" + "</td>" + "<td>" + prdate + "</td>" + "</td>" + "<td>" + "Open" + "</td>" + "</td>" + "<td>" + prtitle + "</td>" + "</tr>");

				}
			}
		}
	</script> */
	
	<script type="text/javascript">
	    window.onload = function () {
		var request;

		request = new XMLHttpRequest();


		}
		if (request != null) {
		    request.open("GET", "https://api.github.com/repos/airwalk-digital/airview/pulls?state=open", false);
		    request.onload = function () {
			if (request.readyState == 4 && request.status == 200) {
			    var pullRequests = JSON.parse(request.responseText);

			    //Create a HTML Table element.
			    var table = document.createElement("table");
			    table.border = "1";

			    //Add the header row.
			    var row = table.insertRow(-1);

			    //Add the header cells.
			    var headerCell = document.createElement("TH");
			    headerCell.innerHTML = "Number";
			    row.appendChild(headerCell);

			    headerCell = document.createElement("TH");
			    headerCell.innerHTML = "Title";
			    row.appendChild(headerCell);

			    headerCell = document.createElement("TH");
			    headerCell.innerHTML = "Creation Date";
			    row.appendChild(headerCell);

			    headerCell = document.createElement("TH");
			    headerCell.innerHTML = "Status";
			    row.appendChild(headerCell);

			    headerCell = document.createElement("TH");
			    headerCell.innerHTML = "Permalinks";
			    row.appendChild(headerCell);


			    //Add the data rows.
			    for (var i = 0; i < pullRequests.length; i++) {
				//Add the data row.
				var row = table.insertRow(-1);

				//Add the data cells.
				var cell = row.insertCell(-1);
				cell.innerHTML = pullRequests[i].number;

				cell = row.insertCell(-1);
				cell.innerHTML = pullRequests[i].title;

				cell = row.insertCell(-1);
				cell.innerHTML = pullRequests[i].created_at;

				cell = row.insertCell(-1);
				cell.innerHTML = pullRequests[i].state;

				cell = row.insertCell(-1);
				cell.innerHTML = "https://airwalk-digital.github.io/airview/pr-preview-ui/pr-" + pullRequests[i].number;
			    }

			    var dvTable = document.getElementById("dvPRGrid");
			    dvTable.innerHTML = "";
			    dvTable.appendChild(table);
			}
		    };
		    request.send();
		}
	    
	</script>
	  
	  
	  
   	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
  </body>
</html>
