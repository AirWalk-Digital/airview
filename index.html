<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Airview UI Preview</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

  </head>
  <body>

    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
				</div>
			</div>
			<br>
			<div class="alert alert-dismissable alert-info">
				<strong>Heads up!</strong> It could take up to 5 minutes for main branch changes to reflect here. 
			</div>
			<h3>
				Airview Storybook Preview
			</h3>
		</div>
	</div>
	<br><hr><br>
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<h3 class="text-center text-primary">
								Airview UI
							</h3>
						</div>
						<div class="col-md-6">
							 
							<a type="button" class="btn btn-success" href="https://airwalk-digital.github.io/airview/airview-ui/">
								Preview
							</a>
						</div>
					</div>
				</div>
			</div>
			<br><hr><br>
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<h3 class="text-center text-primary">
								Airview Compliance UI
							</h3>
						</div>
						<div class="col-md-6">
							 
							<a type="button" class="btn btn-success" href="https://airwalk-digital.github.io/airview/airview-compliance-ui/">
								Preview
							</a>
						</div>
					</div>
				</div>
			</div>
			<br><hr>
		</div>
	</div>
	<br><br>
	<h3>
		Airview Pull Request Previews
	</h3>
	<br>
	<div class="row">
		<div class="col-md-12">
			<table id="pr-table" class="table table-bordered table-hover">
				<thead>
					<tr>
						<th>
							#
						</th>
						<th>
							Request Title
						</th>
						<th>
							Creation Date
						</th>
						<th>
							Status
						</th>
						<th>
							Perma-links
						</th>
					</tr>
				</thead>
				<tbody>
					
				</tbody>
			</table>
		</div>
		<div id="dvPRGrid">
		</div>
	</div>
</div>
<script>
		const Http = new XMLHttpRequest();
		const url = "https://api.github.com/repos/AirWalk-Digital/airview/pulls";
		Http.open("GET", url, true);
	

		var Table = document.getElementById('pr-table');
		Http.onload=(e)=>{
			if (true == true){
				//console.log(Http.responseText);
				var resp = JSON.parse(Http.responseText);

				console.log(typeof resp);

				for (var k in resp){
					console.log(resp[k].number);
					const prid = resp[k].number;
					const prtitle = resp[k].title;
					const prdate = resp[k].created_at;

					const PRUIURL = "https://airwalk-digital.github.io/airview/pr-preview-ui/pr-" + prid;
					const PRCOMPUIURL = "https://airwalk-digital.github.io/airview/pr-preview-compliance-ui/pr-" + prid;


					$(Table).find('tbody').append("<tr><td>" + prid + "</td>" + "<td>" + prtitle + "</td>" + "</td>" + "<td>" + prdate + "</td>" + "</td>" + "<td>" + "Open" + "</td>" + "</td>" + "<td>" + "<a type='button' class='btn btn-success' href=" + PRUIURL + ">Airview UI Preview</a>  "+ "<a type='button' class='btn btn-success' href=" + PRCOMPUIURL + ">Airview Compliance-UI Preview</a>" + "</td>" + "</tr>");

				}
			}
		}

		Http.send(null);
	</script>
	  
	  
	  
   	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
  </body>
</html>
